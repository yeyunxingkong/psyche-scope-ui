(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const C={wallet:2500,days:30,debtRate:"15%/æ—¥",currentDate:"204X/04/01"},x=[{id:"MIYUKI_01",name:"Miyuki",avatar:"ğŸ’—",basic:{bpm:72,temp:"36.6Â°C",state:"CALM (Focusing)"},track:{zone:"Z05 å¤©å®ˆé˜è¡Œæ”¿åŒº (Central)",warn:"Safety Level: High (School Zone)",building:"åœ£æµ·ä¼¦å¨œå­¦é™¢ - è‰ºæœ¯æ¥¼",room:"3F / ç¬¬å››ç”»å®¤ (A53ç­)",audioText:"[Pencil Sketching]... [Soft Humming]...",audioVoice:"Miyuki: 'The light is good today...'"},metrics:{libido:15,stress:25,fatigue:10,corruption:5},mind:{surface:["ä»Šå¤©çš„å¤©æ°”çœ‹èµ·æ¥ä¸é”™â€¦â€¦","æ˜¨æ™šåƒçš„ç”œå“å‘³é“å¾ˆæ£’å‘¢ã€‚","å””â€¦â€¦"],deep:["æœŸå¾…ä¸Šå­¦çš„æ—¥å­å‘¢â€¦â€¦","å­¦é•¿ä¼¼ä¹æ˜¯ä¸ªå¾ˆå¥½çš„äººã€‚","å””ï¼Œ{{user}}è¿˜æ²¡åˆ°ä¹ˆï¼Ÿ"],shame:5,pleasure:0},body:{wetLevel:"Level 0 (Drenched)",wetPercent:10,wetNote:"æ­£å¸¸çš„æ¹¿æ¶¦ç¨‹åº¦ï¼Œå› ç•¥å¾®æœŸå¾…è€Œäº›è®¸å¢åŠ åˆ†æ³Œé‡ã€‚",semenVol:"0 ml (Trace)",semenSrc:"Unknown / Mixed",analVol:"0 ml (Clean)",lastEjacTime:"N/A",residueNote:"æ£€æµ‹åˆ°å¾®é‡æ®‹ç•™å¯èƒ½æºè‡ªå…¬ç”¨è®¾æ–½æˆ–æ¥è§¦ä¼ é€’ï¼Œå»ºè®®è¿›ä¸€æ­¥æ ¸æŸ¥ã€‚"},dev:{upper:{deepThroat:{level:0,label:"Lv. 0 (Choking)"},nippleSensitivity:{level:0,label:"Lv. 0 (Hyper)"},lactationRisk:"Low (5%)"},lower:{vaginalCapacity:{level:0,label:"Lv. 0 (Tight)"},analAdaptation:{level:0,label:"Lv. 0 (Virgin)"},sphincterState:"Spasmodic (ç´§å¼ é—­åˆ)"}},stats:{kiss:{count:0,unknown:1},paizuri:{count:0,unknown:1},anal:{count:0,unknown:1},sex:{count:0,unknown:1},cheat:{count:0,unknown:1},touch:{count:0,unknown:1},oral:{count:0,label:"Practice"},orgasm:{count:0,today:0}},firsts:{kiss:"Unknown / Sleep State",virginity:"Intact (Active)",analVirginity:"Intact",firstOrgasm:"Self (Masturbation)"},recentContacts:[{id:"Object A",desc:"Round Hairbrush (Handle)"},{id:"Person B",desc:"Masseur (Hand Contact)"},{id:"Person C",desc:"Protagonist (Arm/Head)"}],outfit:{current:{top:"ç±³ç™½è‰²å®½æ¾å¤–å¥— (äº¤å‰ç»‘å¸¦è£…é¥°)",inner:"ç™½è‰²è¡¬è¡« + çº¢è‰²è´è¶ç»“é¢†å¸¦",bottom:"æµ…ç±³è‰²è¿è¡£è£™ (è£™æ‘†çº¢çº¿è£…é¥°)",bra:"ç²‰è‰²/ç™½è‰²å†…è¡£",panties:"ç²‰è‰²/ç™½è‰²å†…è£¤",socks:"ç™½è‰²è¿‡è†è¢œ (çº¢è‰²è´è¶ç»“è£…é¥°)",shoes:"ä¼‘é—²é‹"},underwearStatus:{wetness:15,stains:"None (Clean)",wornTime:"6h 23m"},accessories:[{name:"å‘å‹",desc:"ç²‰æ¸å˜ç´«åŒé©¬å°¾ (çº¢è‰²è´è¶ç»“å‘é¥°)"},{name:"æŒåŒ…",desc:"æ£•è‰²å°ç†Šå¤´é€ å‹æ–œæŒåŒ… (çº¢è‰²ç¿»ç›–+é»„è‰²æµè‹)"},{name:"çœ¼ç³",desc:"é‡‘é»„æ¸å˜ç²‰çº¢è‰² (é«˜å…‰æ˜äº®)"}],appearance:{hair:"äº®ç²‰è‰²é•¿å‘ï¼Œå‘æ¢¢æ¸å˜æ·¡ç´«è‰²ï¼ŒåŒé«˜é©¬å°¾ï¼Œçº¢è‰²è´è¶ç»“å‘é¥°ï¼Œé¢å‰ç¢å‘",eyes:"å¤§è€Œæ˜äº®ï¼Œé‡‘é»„åˆ°ç²‰çº¢æ¸å˜ç³è‰²ï¼Œå¸¦é«˜å…‰",expression:"è…¼è…†å¾®ç¬‘ï¼Œè„¸é¢Šæ³›çº¢æ™•",style:"ç”œç¾å°‘å¥³é£"},exposure:{rating:20,label:"Low (ä¿å®ˆç”œç¾)",seduction:40}}}],S={id:"USER_01",name:"ç©å®¶",status:{health:85,stress:30,fatigue:20},academic:{gpa:2.3,gpaLabel:"Average (æŒ‚ç§‘è¾¹ç¼˜)",class:"C112ç­"},body:{strength:45,agility:60,stamina:55,charm:70,intelligence:80},inventory:[{id:"item_001",name:"éšè”½æ‘„åƒå¤´",count:3,desc:"å¾®å‹ç›‘æ§è®¾å¤‡",available:!0},{id:"item_002",name:"è¿½è¸ªå™¨",count:5,desc:"GPSå®šä½èŠ¯ç‰‡",available:!0},{id:"item_003",name:"çªƒå¬å™¨",count:2,desc:"é«˜çµæ•åº¦æ”¶éŸ³è®¾å¤‡",available:!0},{id:"item_004",name:"èƒ½é‡é¥®æ–™",count:10,desc:"æ¢å¤ç–²åŠ³ +20",available:!0},{id:"item_005",name:"é•‡å®šå‰‚",count:5,desc:"é™ä½å‹åŠ› -30",available:!0}],pendingDelivery:[],shop:[{id:"shop_001",name:"é«˜çº§æ‘„åƒå¤´",price:5e3,desc:"4Ké«˜æ¸…å¾®å‹æ‘„åƒå¤´",category:"ç›‘æ§"},{id:"shop_002",name:"ä¿¡å·å¹²æ‰°å™¨",price:8e3,desc:"å±è”½å‘¨å›´é€šè®¯ä¿¡å·",category:"å·¥å…·"},{id:"shop_003",name:"èƒ½é‡é¥®æ–™x5",price:500,desc:"æ¢å¤ç–²åŠ³ +20",category:"æ¶ˆè€—å“"},{id:"shop_004",name:"é•‡å®šå‰‚x3",price:800,desc:"é™ä½å‹åŠ› -30",category:"æ¶ˆè€—å“"},{id:"shop_005",name:"é«˜çº§è¿½è¸ªå™¨",price:12e3,desc:"è¶…é•¿ç»­èˆªGPS",category:"ç›‘æ§"},{id:"shop_006",name:"ä¼ªè£…å¥—è£…",price:15e3,desc:"é™ä½è¢«å‘ç°æ¦‚ç‡",category:"è£…å¤‡"}],sns:{contacts:[{id:"sns_miyuki",name:"ç¾é›ª ğŸ’—",avatar:"ğŸŒ¸",status:"online",lastSeen:"åˆšåˆš",messages:[{from:"miyuki",text:"ä»Šå¤©çš„è¯¾å¥½ç´¯å•Šâ€¦â€¦",time:"09:32"},{from:"user",text:"è¾›è‹¦äº†ï¼Œæ”¾å­¦æˆ‘å»æ¥ä½ ",time:"09:35"},{from:"miyuki",text:"å—¯ï¼é‚£æˆ‘åœ¨æ ¡é—¨å£ç­‰ä½  â™ª",time:"09:36"},{from:"miyuki",text:"å¯¹äº†ï¼Œä»Šå¤©æƒ³åƒè‰è“è›‹ç³•â€¦â€¦å¯ä»¥å—ï¼Ÿ",time:"12:15"}]},{id:"sns_momoko",name:"é“ƒæœ¨æ¡ƒå­",avatar:"ğŸ®",status:"online",lastSeen:"5åˆ†é’Ÿå‰",messages:[{from:"momoko",text:"å˜¿ï¼Œæœ‰ä¸ªèµšé’±çš„å¥½æœºä¼šè¦ä¸è¦å¬å¬ï¼Ÿ",time:"æ˜¨å¤©"},{from:"user",text:"ä»€ä¹ˆæœºä¼šï¼Ÿ",time:"æ˜¨å¤©"},{from:"momoko",text:"ç§ä¸‹èŠï¼Œè¿™é‡Œä¸æ–¹ä¾¿è¯´ï½",time:"æ˜¨å¤©"},{from:"momoko",text:"å¯¹äº†ï¼Œä½ é‚£ä¸ªé’æ¢…ç«¹é©¬æœ€è¿‘å¥½åƒè¢«å­¦é•¿ç›¯ä¸Šäº†å“¦",time:"10:22"}]},{id:"sns_sato",name:"ä½è—¤ (ç”œå“åº—)",avatar:"ğŸ°",status:"offline",lastSeen:"2å°æ—¶å‰",messages:[{from:"sato",text:"ä»Šå¤©ç¾é›ªåŒå­¦åˆæ¥åº—é‡Œäº†",time:"æ˜¨å¤©"},{from:"sato",text:"å¥¹çœ‹èµ·æ¥å¿ƒæƒ…ä¸å¤ªå¥½çš„æ ·å­â€¦â€¦",time:"æ˜¨å¤©"},{from:"user",text:"è°¢è°¢ä½ å‘Šè¯‰æˆ‘",time:"æ˜¨å¤©"},{from:"sato",text:"æ²¡äº‹ï¼Œæˆ‘ä¼šç…§é¡¾å¥½å¥¹çš„",time:"æ˜¨å¤©"}]},{id:"sns_unknown",name:"??? (æœªçŸ¥å·ç )",avatar:"â“",status:"unknown",lastSeen:"æœªçŸ¥",messages:[{from:"unknown",text:"P-Scope ç”¨æˆ·æ‚¨å¥½",time:"3å¤©å‰"},{from:"unknown",text:"æ‚¨çš„è¯•ç”¨æœŸå³å°†ç»“æŸ",time:"3å¤©å‰"},{from:"unknown",text:"å±Šæ—¶è¯·åŠæ—¶ç»­è´¹ï¼Œå¦åˆ™â€¦â€¦",time:"3å¤©å‰"},{from:"unknown",text:"æ‚¨çŸ¥é“åæœçš„ :)",time:"3å¤©å‰"}]}],timeline:[{id:"post_001",author:"é›ªèº ğŸŒ¸",avatar:"ğŸ¨",time:"2å°æ—¶å‰",content:"ä»Šå¤©åœ¨å…¬å›­ç”»äº†ä¸€å¹…é£æ™¯ç”»â€¦â€¦è™½ç„¶ä¸å¤ªæ»¡æ„ï¼Œä½†æ˜¯å¤©æ°”çœŸçš„å¾ˆå¥½å‘¢ã€‚",image:null,likes:3,comments:[{author:"è·¯äººA",text:"ç”»å¾—çœŸå¥½çœ‹ï¼",time:"1å°æ—¶å‰"},{author:"è‰ºæœ¯çˆ±å¥½è€…",text:"æœŸå¾…çœ‹åˆ°æˆå“ï½",time:"30åˆ†é’Ÿå‰"}]},{id:"post_002",author:"æ¡ƒå­ğŸ®",avatar:"ğŸ®",time:"5å°æ—¶å‰",content:"æ–°å‡ºçš„æ¸¸æˆå¤ªå¥½ç©äº†ï¼ï¼æœ‰æ²¡æœ‰äººä¸€èµ·ç»„é˜Ÿå•Šï½ï½",image:null,likes:12,comments:[{author:"æ¸¸æˆå®…",text:"æˆ‘æˆ‘æˆ‘ï¼åŠ æˆ‘ï¼",time:"4å°æ—¶å‰"}]},{id:"post_003",author:"Sweet_Wishå®˜æ–¹",avatar:"ğŸ°",time:"æ˜¨å¤©",content:"ã€æ–°å“ä¸Šå¸‚ã€‘è‰è“èŠå£«è›‹ç³•é™æ—¶ç‰¹æƒ ï¼å‰10åé¡¾å®¢äº«8æŠ˜ä¼˜æƒ ï½æ¬¢è¿å…‰ä¸´â™ª",image:null,likes:28,comments:[{author:"åƒè´§å°‘å¥³",text:"å†²å†²å†²ï¼",time:"æ˜¨å¤©"},{author:"é›ªèº ğŸŒ¸",text:"çœ‹èµ·æ¥å¥½å¥½åƒâ€¦â€¦",time:"æ˜¨å¤©"}]},{id:"post_004",author:"å­¦ç”Ÿä¼šå…¬å‘Š",avatar:"ğŸ“¢",time:"2å¤©å‰",content:"åœ£æµ·ä¼¦å¨œå­¦é™¢æ˜¥å­£ç ”å­¦æ—…è¡ŒæŠ¥åå¼€å§‹ï¼ç›®çš„åœ°ï¼šæ±¤ä¹‹ä¹¡æ¸©æ³‰æ—…é¦†ã€‚è¯·å„ä½åŒå­¦è¸Šè·ƒå‚åŠ ã€‚",image:null,likes:45,comments:[{author:"æœŸå¾…çš„å­¦ç”Ÿ",text:"ç»ˆäºç­‰åˆ°äº†ï¼",time:"2å¤©å‰"},{author:"æ¸©æ³‰æ§",text:"æ¸©æ³‰ï¼æ¸©æ³‰ï¼",time:"2å¤©å‰"},{author:"é›ªèº ğŸŒ¸",text:"å¥½æœŸå¾…â€¦â€¦ä½†æ˜¯æœ‰ç‚¹ç´§å¼ ",time:"1å¤©å‰"}]},{id:"post_005",author:"åŒ¿åç”¨æˆ·",avatar:"ğŸ‘¤",time:"3å¤©å‰",content:"æœ€è¿‘å­¦æ ¡é‡Œå¥½åƒæœ‰å¥‡æ€ªçš„ä¼ é—˜â€¦â€¦å¤§å®¶å°å¿ƒç‚¹",image:null,likes:7,comments:[]}],unreadCount:3},tasks:{mainQuest:{title:"æ¥è¿‘ç›®æ ‡",desc:"ä¸ MIYUKI å»ºç«‹åˆæ­¥ä¿¡ä»»å…³ç³»",progress:15,reward:"5000 CR + å¥½æ„Ÿåº¦ +10"},daily:[{name:"æ—©å®‰é—®å€™",status:"completed",reward:"200 CR"},{name:"åˆé¤é‚€çº¦",status:"active",reward:"500 CR"},{name:"æ”¾å­¦åŒè¡Œ",status:"locked",reward:"300 CR"},{name:"æ™šé—´é€šè¯",status:"locked",reward:"400 CR"}],hidden:[{name:"???",hint:"åœ¨è‰ºæœ¯æ¥¼å‘ç°æŸç‰©",reward:"2000 CR"},{name:"???",hint:"è§¦å‘ç‰¹æ®Šå¯¹è¯",reward:"å¥½æ„Ÿåº¦ +20"}],summary:{completed:3,earnedCR:1500,affectionChange:"+5"}}},p={meta:C,characters:x,user:S},c={wallet:p.meta.wallet,meta:p.meta,characters:p.characters,user:p.user,currentCharacterId:p.characters[0]?.id||null,currentMode:"character",unlockedItems:new Set};function I(){return c.characters.find(t=>t.id===c.currentCharacterId)||null}function B(t){return c.characters.find(a=>a.id===t)?(c.currentCharacterId=t,c.currentMode="character",!0):!1}function M(){c.currentMode="user"}function T(){return c.currentMode}function D(){return c.characters}function v(){return c.user}function A(t){c.wallet+=t;const e=document.getElementById("walletDisplay");e&&(e.textContent=c.wallet.toLocaleString())}function R(t){return c.unlockedItems.has(t)}function H(t){c.unlockedItems.add(t)}function $(t){const a=T()==="user"?"#user-tabs":"#character-tabs";document.querySelectorAll(`${a} .tab-btn`).forEach(i=>i.classList.remove("active"));const n=document.querySelector(`${a} [data-tab="${t}"]`);n&&n.classList.add("active"),document.querySelectorAll(".module-section").forEach(i=>i.classList.remove("active"));const r=document.getElementById("module-"+t);r&&r.classList.add("active")}function w(t){const e=document.getElementById("character-tabs"),a=document.getElementById("user-tabs"),n=document.getElementById("telemetry-panel"),r=document.getElementById("user-telemetry-panel"),i=document.querySelector(".visual-feed"),o=document.getElementById("user-visual-feed");t==="user"?(e.style.display="none",a.style.display="flex",n&&(n.style.display="none"),r&&(r.style.display="block"),i&&(i.style.display="none"),o&&(o.style.display="flex"),document.querySelectorAll(".module-section").forEach(d=>d.classList.remove("active")),document.getElementById("module-user-status")?.classList.add("active"),document.querySelectorAll("#user-tabs .tab-btn").forEach(d=>d.classList.remove("active")),document.querySelector('#user-tabs [data-tab="user-status"]')?.classList.add("active"),document.getElementById("user-panel-btn")?.classList.add("active"),document.querySelectorAll(".character-item").forEach(d=>d.classList.remove("active"))):(e.style.display="flex",a.style.display="none",n&&(n.style.display="block"),r&&(r.style.display="none"),i&&(i.style.display="flex"),o&&(o.style.display="none"),document.querySelectorAll(".module-section").forEach(d=>d.classList.remove("active")),document.getElementById("module-track")?.classList.add("active"),document.getElementById("user-panel-btn")?.classList.remove("active"))}function _(t,e,a){const n=document.getElementById("character-list");n&&(n.innerHTML=t.map(r=>`
    <div class="character-item ${r.id===e?"active":""}" data-id="${r.id}">
      <span class="char-avatar">${r.avatar||"ğŸ‘¤"}</span>
      <span class="char-name">${r.name}</span>
      <span class="char-id">${r.id}</span>
    </div>
  `).join(""),n.querySelectorAll(".character-item").forEach(r=>{r.addEventListener("click",()=>{const i=r.dataset.id;a(i)})}))}function P(t){document.querySelectorAll(".character-item").forEach(e=>{e.classList.toggle("active",e.dataset.id===t)}),document.getElementById("user-panel-btn")?.classList.remove("active")}function L(t,e){if(!R(t))if(c.wallet>=e){A(-e),H(t);const a=document.getElementById("lock-"+t);a&&(a.style.opacity="0",setTimeout(()=>{a.classList.add("unlocked"),a.style.display="none"},500)),console.log(`è§£é”æˆåŠŸ: -${e} CR`)}else f(`ä½™é¢ä¸è¶³ï¼<br>éœ€è¦ ${e} CR`)}function f(t){document.getElementById("modalMsg").innerHTML=t,document.getElementById("modal").classList.add("show")}function q(){document.getElementById("modal").classList.remove("show")}function s(t,e,a=""){const n=document.getElementById(t);n&&(n.textContent=e,a&&(n.className=`data-value ${a}`))}function l(t,e,a){const n=document.getElementById(t);n&&(n.style.width=`${e}%`,n.setAttribute("data-percent",`${e}%`),a&&(n.className=`bar-fill ${a}`))}function j(){_(D(),c.currentCharacterId,U),k(),O(),ie(),oe(),N(),ue(),document.getElementById("walletDisplay").textContent=c.wallet.toLocaleString()}function N(){const{meta:t}=c;if(!t)return;const e=document.getElementById("currentDateDisplay");e&&t.currentDate&&(e.textContent=t.currentDate);const a=document.getElementById("debtRateDisplay");a&&t.debtRate&&(a.textContent=t.debtRate);const n=document.getElementById("daysLeftDisplay");n&&t.days!==void 0&&(n.textContent=t.days,n.style.color="#0f9")}function U(t){B(t)&&(P(t),w("character"),k())}function k(){const t=I();t&&(s("val-target",t.id),K(t),X(t),Y(t),J(t),ee(t),te(t),ae(t),ne(t),se(t),re(t))}function O(){const t=v();if(!t)return;const{status:e}=t;if(e){const r=y(e.health,"health");s("val-user-health",`${e.health}% (${r})`,"val-green"),l("bar-user-health",e.health,"bar-health");const i=y(e.stress,"stress");s("val-user-stress",`${e.stress}% (${i})`,"val-gold"),l("bar-user-stress",e.stress,"bar-stress");const o=y(e.fatigue,"fatigue");s("val-user-fatigue",`${e.fatigue}% (${o})`,"val-blue"),l("bar-user-fatigue",e.fatigue,"bar-wet"),s("val-side-health",`${e.health}%`,"val-green"),l("bar-side-health",e.health,"bar-health"),s("val-side-stress",`${e.stress}%`,"val-gold"),l("bar-side-stress",e.stress,"bar-stress"),s("val-side-fatigue",`${e.fatigue}%`,"val-blue"),l("bar-side-fatigue",e.fatigue,"bar-wet"),V()}const{academic:a}=t;if(a){s("val-user-class",a.class);const r=a.gpa/4*100,i="val-gold";s("val-user-gpa",`${a.gpa.toFixed(1)} / 4.0`,i),l("bar-user-gpa",r,""),s("val-user-gpa-label",a.gpaLabel,i)}const{body:n}=t;if(n){s("val-body-strength",`${n.strength}/100`),l("bar-body-strength",n.strength,"bar-strength"),s("val-body-agility",`${n.agility}/100`),l("bar-body-agility",n.agility,"bar-agility"),s("val-body-stamina",`${n.stamina}/100`),l("bar-body-stamina",n.stamina,"bar-stamina"),s("val-body-charm",`${n.charm}/100`),l("bar-body-charm",n.charm,"bar-charm"),s("val-body-intelligence",`${n.intelligence}/100`),l("bar-body-intelligence",n.intelligence,"bar-intel");const r=Math.round((n.strength+n.agility+n.stamina+n.charm+n.intelligence)/5);s("val-body-total",`${r}/100`,"val-gold"),s("val-body-rank",z(r),F(r))}E(t.inventory),Q(t.shop)}function y(t,e){return e==="health"?t>80?"Excellent":t>50?"Good":t>20?"Weak":"Critical":e==="stress"||e==="fatigue"?t>80?"CRITICAL":t>50?"High":t>20?"Normal":"Low":"Normal"}function V(t){const e=[],a=document.getElementById("user-status-tips");a&&(a.innerHTML=e.length>0?e.map(n=>`<div style="margin-bottom:5px;">${n}</div>`).join(""):'<div style="color:#0f9;">âœ… ä¸€åˆ‡æ­£å¸¸</div>')}function z(t){return t>=90?"S (Elite)":t>=80?"A (Excellent)":t>=60?"B (Good)":t>=40?"C (Average)":"D (Weak)"}function F(t){return t>=90?"val-gold":t>=80?"val-purple":t>=60?"val-blue":"val-grey"}function E(t){const e=document.getElementById("inventory-list");if(!e||!t)return;const n=v().pendingDelivery||[],r=t.map(u=>`
    <div class="inventory-item ${u.available!==!1?"":"item-unavailable"}">
      <div class="item-header">
        <span class="item-name">${u.name}</span>
        <span class="item-count">x${u.count}</span>
      </div>
      <div class="item-desc">${u.desc}</div>
      ${u.available!==!1?'<div class="item-status available">âœ… å¯ç”¨</div>':'<div class="item-status unavailable">â³ é…é€ä¸­</div>'}
    </div>
  `).join(""),i=n.length>0?`
    <div class="pending-section">
      <div class="pending-title">ğŸ“¦ å¾…é…é€ (Pending Delivery)</div>
      ${n.map(u=>`
        <div class="inventory-item item-pending">
          <div class="item-header">
            <span class="item-name">${u.name}</span>
            <span class="item-count">x${u.count}</span>
          </div>
          <div class="item-desc">${u.desc}</div>
          <div class="item-status pending">ğŸšš é¢„è®¡ ${u.daysLeft} å¤©ååˆ°è¾¾</div>
        </div>
      `).join("")}
    </div>
  `:"";e.innerHTML=r+i,s("val-inv-types",`${t.length} ç§`);const o=t.reduce((u,h)=>u+h.count,0);s("val-inv-total",`${o} ä¸ª`);const d=n.reduce((u,h)=>u+h.count,0);d>0?s("val-inv-pending",`${d} ä¸ªé…é€ä¸­`,"val-gold"):s("val-inv-pending","æ— ","val-grey")}function Q(t){const e=document.getElementById("shop-list");!e||!t||(e.innerHTML=t.map(a=>`
    <div class="shop-item" data-id="${a.id}" data-price="${a.price}" data-name="${a.name}">
      <div class="shop-item-header">
        <span class="shop-item-name">${a.name}</span>
        <span class="shop-item-category">${a.category}</span>
      </div>
      <div class="shop-item-desc">${a.desc}</div>
      <div class="shop-item-footer">
        <span class="shop-item-price">${a.price.toLocaleString()} CR</span>
        <button class="add-cart-btn">åŠ å…¥è´­ç‰©è½¦</button>
      </div>
    </div>
  `).join(""),e.querySelectorAll(".add-cart-btn").forEach(a=>{a.addEventListener("click",n=>{const r=n.target.closest(".shop-item");W(r.dataset.id,r.dataset.name,parseInt(r.dataset.price))})}),g())}const m=[];function W(t,e,a){const n=m.find(r=>r.id===t);n?n.count++:m.push({id:t,name:e,price:a,count:1}),g()}function g(){const t=document.getElementById("cart-list");if(!t)return;if(m.length===0){t.innerHTML='<div style="color:#666; font-size:11px; text-align:center;">è´­ç‰©è½¦ä¸ºç©º</div>',s("val-cart-total","0 CR","val-gold");return}t.innerHTML=m.map(a=>`
    <div class="cart-item">
      <span class="cart-item-name">${a.name}</span>
      <span class="cart-item-count">x${a.count}</span>
      <span class="cart-item-price">${(a.price*a.count).toLocaleString()} CR</span>
      <button class="remove-cart-btn" data-id="${a.id}">âœ•</button>
    </div>
  `).join("");const e=m.reduce((a,n)=>a+n.price*n.count,0);s("val-cart-total",`${e.toLocaleString()} CR`,"val-gold"),t.querySelectorAll(".remove-cart-btn").forEach(a=>{a.addEventListener("click",()=>{const n=m.findIndex(r=>r.id===a.dataset.id);n>-1&&(m.splice(n,1),g())})})}function G(){if(m.length===0){f("è´­ç‰©è½¦ä¸ºç©ºï¼");return}const t=m.reduce((a,n)=>a+n.price*n.count,0);if(c.wallet<t){f(`ä½™é¢ä¸è¶³ï¼<br>éœ€è¦ ${t.toLocaleString()} CR<br>å½“å‰ä½™é¢ ${c.wallet.toLocaleString()} CR`);return}updateWallet(-t);const e=v();e.pendingDelivery||(e.pendingDelivery=[]),m.forEach(a=>{const n=Math.floor(Math.random()*3)+1,r=e.pendingDelivery.find(i=>i.name===a.name);r?r.count+=a.count:e.pendingDelivery.push({id:"pending_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),name:a.name,count:a.count,desc:"å·²è´­ä¹°ç‰©å“",daysLeft:n,orderedAt:c.meta.currentDate})}),m.length=0,g(),E(e.inventory),f(`è´­ä¹°æˆåŠŸï¼<br>æ¶ˆè´¹ ${t.toLocaleString()} CR<br><br>ğŸ“¦ ç‰©å“å°†åœ¨ 1~3 å¤©å†…é…é€åˆ°ä»“åº“`)}function K(t){const{basic:e}=t;e&&(s("val-bpm",e.bpm,"val-blue"),s("val-temp",e.temp),s("val-state",e.state,"val-blue"))}function X(t){const{track:e}=t;e&&(s("val-zone",e.zone),s("val-zone-warn",e.warn),s("val-building",e.building),s("val-room",e.room),s("val-audio-text",e.audioText),s("val-audio-voice",e.audioVoice))}function Y(t){const{metrics:e}=t;if(!e)return;const a=b(e.libido);s("val-libido",`${e.libido}% (${a})`,"val-purple"),l("bar-libido",e.libido,"bar-dev");const n=b(e.stress);s("val-stress",`${e.stress}% (${n})`,"val-gold"),l("bar-stress",e.stress,"");const r=b(e.fatigue);if(s("val-fatigue",`${e.fatigue}% (${r})`,"val-blue"),l("bar-fatigue",e.fatigue,"bar-wet"),e.corruption!==void 0){const i=Z(e.corruption);s("val-corruption",`${e.corruption}% (${i})`,"val-purple"),l("bar-corruption",e.corruption,"")}}function Z(t){return t>=80?"Fallen":t>=60?"Corrupted":t>=40?"Tainted":t>=20?"Curious":t>=10?"Innocent":"Pure"}function b(t){return t>80?"CRITICAL":t>50?"High":t<20?"Low":"Normal"}function J(t){const{mind:e}=t;if(!e)return;const a=document.getElementById("surface-thoughts");a&&(a.innerHTML=e.surface.map(r=>`<div class="thought-bubble">"${r}"</div>`).join(""));const n=document.getElementById("deep-thoughts");n&&(n.innerHTML=e.deep.map(r=>`<div class="thought-bubble deep-thought">"${r}"</div>`).join("")),s("val-shame",`${e.shame}% (MAX)`,"val-red"),l("bar-shame",e.shame,""),s("val-pleasure",`${e.pleasure}% (Rising)`,"val-gold"),l("bar-pleasure",e.pleasure,"")}function ee(t){const{body:e}=t;e&&(s("val-wet-level",e.wetLevel),l("bar-wet",e.wetPercent,"bar-wet"),s("val-wet-note","> "+e.wetNote),s("val-semen-vol",e.semenVol,"val-grey"),s("val-semen-src",e.semenSrc,"val-grey"),s("val-anal-vol",e.analVol,"val-grey"),s("val-ejac-time",e.lastEjacTime),s("val-residue-note","* æ³¨ï¼š"+e.residueNote))}function te(t){const{dev:e}=t;e&&(s("val-deep-throat",e.upper.deepThroat.label,"val-purple"),l("bar-deep-throat",e.upper.deepThroat.level,"bar-dev"),s("val-nipple",e.upper.nippleSensitivity.label,"val-red"),l("bar-nipple",e.upper.nippleSensitivity.level,"bar-dev"),s("val-lactation",e.upper.lactationRisk,"val-gold"),s("val-vaginal",e.lower.vaginalCapacity.label,"val-blue"),l("bar-vaginal",e.lower.vaginalCapacity.level,"bar-dev"),s("val-anal-adapt",e.lower.analAdaptation.label,"val-grey"),l("bar-anal",e.lower.analAdaptation.level,"bar-dev"),s("val-sphincter",e.lower.sphincterState))}function ae(t){const{stats:e}=t;e&&(s("val-kiss",`${e.kiss.count} (Unknown: ${e.kiss.unknown})`),s("val-paizuri",`${e.paizuri.count} (Unknown: ${e.paizuri.unknown})`),s("val-anal-count",`${e.anal.count} (Unknown: ${e.anal.unknown})`),s("val-sex",`${e.sex.count} (Unknown: ${e.sex.unknown})`),s("val-cheat",`${e.cheat.count} (Unknown: ${e.cheat.unknown})`),s("val-touch",`${e.touch.count} (Unknown: ${e.touch.unknown})`),s("val-oral",`${e.oral.count} (${e.oral.label})`,"val-purple"),s("val-orgasm",`${e.orgasm.count} (Today: +${e.orgasm.today})`,"val-red"))}function ne(t){const{firsts:e}=t;e&&(s("val-first-kiss",e.kiss,"val-grey"),s("val-virginity",e.virginity,"val-gold"),s("val-anal-v",e.analVirginity,"val-gold"),s("val-first-orgasm",e.firstOrgasm))}function se(t){const{recentContacts:e}=t;if(!e)return;const a=document.getElementById("recent-contacts");a&&(a.innerHTML=e.map(n=>`<div class="data-row"><span>${n.id}</span> <span class="data-value">${n.desc}</span></div>`).join(""))}function re(t){const{outfit:e}=t;if(!e)return;s("val-outfit-top",e.current.top),s("val-outfit-inner",e.current.inner||"--"),s("val-outfit-bottom",e.current.bottom),s("val-outfit-bra",e.current.bra,"val-purple"),s("val-outfit-panties",e.current.panties,"val-purple"),s("val-outfit-socks",e.current.socks),s("val-outfit-shoes",e.current.shoes),e.appearance&&(s("val-appearance-hair",e.appearance.hair||"--"),s("val-appearance-eyes",e.appearance.eyes||"--"),s("val-appearance-expression",e.appearance.expression||"--"),s("val-appearance-style",e.appearance.style||"--","val-purple")),s("val-panty-wet",`${e.underwearStatus.wetness}%`,"val-blue"),l("bar-panty-wet",e.underwearStatus.wetness,"bar-wet"),s("val-panty-stain",e.underwearStatus.stains),s("val-worn-time",e.underwearStatus.wornTime);const a=document.getElementById("accessories-list");a&&(a.innerHTML=e.accessories.map(n=>`<div class="data-row"><span>${n.name}</span> <span class="data-value">${n.desc}</span></div>`).join("")),s("val-exposure",`${e.exposure.rating}% - ${e.exposure.label}`,"val-gold"),l("bar-exposure",e.exposure.rating,""),s("val-seduction",`${e.exposure.seduction}%`,"val-red")}function ie(){const t=v(),{tasks:e}=t;if(!e)return;const a=document.getElementById("main-quest");a&&(a.innerHTML=`
      <div class="data-row"><span>ä»»åŠ¡åç§°</span> <span class="data-value val-gold">${e.mainQuest.title}</span></div>
      <div class="data-row"><span>ä»»åŠ¡æè¿°</span> <span class="data-value">${e.mainQuest.desc}</span></div>
      <div class="data-row"><span>è¿›åº¦</span> <span class="data-value val-blue">${e.mainQuest.progress}%</span></div>
      <div class="bar-container"><div class="bar-fill bar-wet" style="width: ${e.mainQuest.progress}%;" data-percent="${e.mainQuest.progress}%"></div></div>
      <div class="data-row" style="margin-top:5px;"><span>å¥–åŠ±</span> <span class="data-value val-purple">${e.mainQuest.reward}</span></div>
    `);const n=document.getElementById("daily-tasks");n&&(n.innerHTML=e.daily.map(i=>{let o="",d="";return i.status==="completed"?(o="val-gold",d="âœ…"):i.status==="active"?(o="val-blue",d="ğŸ”„"):(o="val-grey",d="ğŸ”’"),`<div class="data-row"><span>${d} ${i.name}</span> <span class="data-value ${o}">${i.reward}</span></div>`}).join(""));const r=document.getElementById("hidden-tasks");r&&(r.innerHTML=e.hidden.map(i=>`
        <div class="data-row"><span>ğŸ”® ${i.name}</span> <span class="data-value val-purple">${i.reward}</span></div>
        <div style="font-size:10px; color:#aaa; margin-bottom:8px; padding-left:20px;">æç¤º: ${i.hint}</div>
      `).join("")),s("val-completed",`${e.summary.completed} ä¸ª`,"val-gold"),s("val-earned-cr",`${e.summary.earnedCR} CR`),s("val-affection",e.summary.affectionChange,"val-purple")}function oe(){const t=v(),{sns:e}=t;if(!e)return;const a=document.getElementById("sns-unread");a&&(a.textContent=e.unreadCount,a.style.display="inline-block");const n=document.getElementById("sns-contact-list");n&&e.contacts&&(n.innerHTML=e.contacts.map(r=>{const i=r.status==="online"?"status-online":r.status==="offline"?"status-offline":"status-unknown",o=r.messages[r.messages.length-1];return`
        <div class="sns-contact-item" data-contact-id="${r.id}">
          <div class="sns-contact-avatar">${r.avatar}</div>
          <div class="sns-contact-info">
            <div class="sns-contact-name">
              ${r.name}
              <span class="sns-status-dot ${i}"></span>
            </div>
            <div class="sns-contact-preview">${o?o.text.substring(0,20)+(o.text.length>20?"...":""):"æš‚æ— æ¶ˆæ¯"}</div>
          </div>
          <div class="sns-contact-time">${r.lastSeen}</div>
        </div>
      `}).join(""),n.querySelectorAll(".sns-contact-item").forEach(r=>{r.addEventListener("click",()=>{const i=r.dataset.contactId;de(i),n.querySelectorAll(".sns-contact-item").forEach(o=>o.classList.remove("active")),r.classList.add("active")})})),le(e.timeline),ce()}function le(t){const e=document.getElementById("sns-timeline-list");!e||!t||(e.innerHTML=t.map(a=>`
    <div class="timeline-post" data-post-id="${a.id}">
      <div class="post-header">
        <div class="post-avatar">${a.avatar}</div>
        <div class="post-author-info">
          <div class="post-author">${a.author}</div>
          <div class="post-time">${a.time}</div>
        </div>
      </div>
      <div class="post-content">${a.content}</div>
      <div class="post-actions">
        <span class="post-like">â¤ï¸ ${a.likes}</span>
        <span class="post-comment-count">ğŸ’¬ ${a.comments.length}</span>
      </div>
      ${a.comments.length>0?`
        <div class="post-comments">
          ${a.comments.map(n=>`
            <div class="comment-item">
              <span class="comment-author">${n.author}:</span>
              <span class="comment-text">${n.text}</span>
              <span class="comment-time">${n.time}</span>
            </div>
          `).join("")}
        </div>
      `:""}
    </div>
  `).join(""))}function ce(){document.querySelectorAll(".sns-tab-btn").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.snsTab;document.querySelectorAll(".sns-tab-btn").forEach(n=>n.classList.remove("active")),t.classList.add("active"),document.querySelectorAll(".sns-panel").forEach(n=>n.classList.remove("active"));const a=document.getElementById(`sns-${e}-panel`);a&&a.classList.add("active")})})}function de(t){const e=v(),{sns:a}=e;if(!a)return;const n=a.contacts.find(o=>o.id===t);if(!n)return;const r=document.getElementById("sns-chat-name");r&&(r.textContent=n.name);const i=document.getElementById("sns-chat-messages");i&&(i.innerHTML=n.messages.map(o=>`
        <div class="sns-message ${o.from==="user"?"sns-message-user":"sns-message-other"}">
          <div class="sns-message-bubble">${o.text}</div>
          <div class="sns-message-time">${o.time}</div>
        </div>
      `).join(""),i.scrollTop=i.scrollHeight)}function ue(){document.querySelectorAll("#character-tabs .tab-btn").forEach(t=>{t.addEventListener("click",()=>$(t.dataset.tab))}),document.querySelectorAll("#user-tabs .tab-btn").forEach(t=>{t.addEventListener("click",()=>$(t.dataset.tab))}),document.getElementById("user-panel-btn")?.addEventListener("click",()=>{M(),w("user")}),document.addEventListener("click",t=>{if(t.target.classList.contains("buy-btn")){const e=t.target.dataset.lock,a=parseInt(t.target.dataset.cost,10);e&&a&&L(e,a)}}),document.getElementById("modalClose")?.addEventListener("click",q),document.getElementById("checkout-btn")?.addEventListener("click",G)}window.switchTab=$;window.unlockItem=L;document.addEventListener("DOMContentLoaded",j);
