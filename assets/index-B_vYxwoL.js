(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const p={wallet:2500,debt:3e6,days:30,debtRate:"15%/æ—¥",version:"v5.4",target:"MIYUKI_01"},v={bpm:72,temp:"36.6Â°C",state:"CALM (Focusing)"},y={zone:"Z05 å¤©å®ˆé˜è¡Œæ”¿åŒº (Central)",warn:"Safety Level: High (School Zone)",building:"åœ£æµ·ä¼¦å¨œå­¦é™¢ - è‰ºæœ¯æ¥¼",room:"3F / ç¬¬å››ç”»å®¤ (A53ç­)",audioText:"[Pencil Sketching]... [Soft Humming]...",audioVoice:"Miyuki: 'The light is good today...'"},b={libido:15,stress:25,fatigue:10},h={surface:["Drawing is fun...","I wonder if [Protagonist] is working?"],deep:["I hope he likes this painting.","Should I buy the discount cake?"],shame:5},w={wetLevel:"Level 1 (Dry)",wetPercent:5,semenVol:"0 ml (Clean)",semenSrc:"None",analObj:"Empty"},L={kiss:0,paizuri:0,sex:0,orgasm:12},d={meta:p,basic:v,track:y,metrics:b,mind:h,body:w,stats:L},c={wallet:d.meta.wallet,gameData:{...d},unlockedItems:new Set};function k(e){c.wallet+=e,document.getElementById("walletDisplay").textContent=c.wallet}function I(e){return c.unlockedItems.has(e)}function E(e){c.unlockedItems.add(e)}const S=[{title:"ç›´è‚ å†…å£æ•æ„Ÿåº¦",val:"High (Level 4)",price:1800,icon:"ğŸ©"},{title:"è´¹æ´›è’™æˆåˆ†åˆ†æ",val:"Estrogen Spike (è¯±äºº)",price:3600,icon:"ğŸ§ª"},{title:"æ¢¦å¢ƒè„‘æ³¢è§£æ",val:"Subject: Player (NTR Nightmare)",price:4500,icon:"ğŸ§ "},{title:"çš®è‚¤è§¦è§‰æ˜ å°„",val:"Hyper-Sensitive (å…¨èº«)",price:2400,icon:"âœ‹"},{title:"å†…è£¤å¸ƒæ–™é¥±å’Œåº¦",val:"98% (Dripping)",price:1200,icon:"ğŸ‘™"}],u={aiPool:S};function m(e){document.querySelectorAll(".tab-btn").forEach(t=>t.classList.remove("active")),document.querySelector(`[data-tab="${e}"]`).classList.add("active"),document.querySelectorAll(".module-section").forEach(t=>t.classList.remove("active")),document.getElementById("module-"+e).classList.add("active")}function f(e,t){if(!I(e))if(c.wallet>=t){k(-t),E(e);const n=document.getElementById("lock-"+e);n&&(n.style.opacity="0",setTimeout(()=>{n.classList.add("unlocked"),n.style.display="none"},500)),console.log(`è§£é”æˆåŠŸ: -${t} CR`)}else D(`ä½™é¢ä¸è¶³ï¼<br>éœ€è¦ ${t} CR`)}function D(e){document.getElementById("modalMsg").innerHTML=e,document.getElementById("modal").classList.add("show")}function $(){document.getElementById("modal").classList.remove("show")}function g(){const e=u.aiPool[Math.floor(Math.random()*u.aiPool.length)],t="ai-"+Date.now(),n=`
    <div class="data-block" style="animation: fadeIn 0.5s;">
      <div class="micro-lock" id="lock-${t}">
        <span class="lock-icon">${e.icon}</span>
        <div class="lock-title">AI æ¨æµ‹: ${e.title}</div>
        <button class="buy-btn" data-lock="${t}" data-cost="${e.price}">ä¸‹è½½ (${e.price} CR)</button>
      </div>
      <div class="data-row">
        <span>${e.title}</span>
        <span class="data-value val-gold">${e.val}</span>
      </div>
      <div style="font-size:10px; color:#aaa;">From: DeepLearning_Model_v9.2</div>
    </div>
  `;document.getElementById("ai-content-container").insertAdjacentHTML("beforeend",n)}function l(e,t,n=""){const a=document.getElementById(e);a&&(a.textContent=t,n&&(a.className=`data-value ${n}`))}function r(e,t,n){const a=document.getElementById(e);a&&(a.style.width=`${t}%`,a.setAttribute("data-percent",`${t}%`),n&&(a.className=`bar-fill ${n}`))}function M(){B(),C(),A(),P(),document.getElementById("walletDisplay").textContent=c.wallet}function B(){const{basic:e}=c.gameData;l("val-bpm",e.bpm,"val-blue"),l("val-temp",e.temp),l("val-state",e.state,"val-blue")}function C(){const{track:e}=c.gameData;l("val-zone",e.zone),l("val-zone-warn",e.warn),l("val-building",e.building),l("val-room",e.room)}function A(){const{metrics:e}=c.gameData;r("bar-libido",e.libido,"bar-dev"),r("bar-stress",e.stress,""),r("bar-fatigue",e.fatigue,"bar-wet")}function P(){document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",()=>m(e.dataset.tab))}),document.addEventListener("click",e=>{if(e.target.classList.contains("buy-btn")){const t=e.target.dataset.lock,n=parseInt(e.target.dataset.cost,10);t&&n&&f(t,n)}}),document.querySelector(".ai-placeholder")?.addEventListener("click",g),document.getElementById("modalClose")?.addEventListener("click",$)}window.switchTab=m;window.unlockItem=f;window.generateAIContent=g;document.addEventListener("DOMContentLoaded",M);
