(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const f={wallet:25e6,debt:3e6,days:30,debtRate:"15%/æ—¥",version:"v5.4",target:"MIYUKI_01"},b={bpm:72,temp:"36.6Â°C",state:"CALM (Focusing)"},w={zone:"Z05 å¤©å®ˆé˜è¡Œæ”¿åŒº (Central)",warn:"Safety Level: High (School Zone)",building:"åœ£æµ·ä¼¦å¨œå­¦é™¢ - è‰ºæœ¯æ¥¼",room:"3F / ç¬¬å››ç”»å®¤ (A53ç­)",audioText:"[Pencil Sketching]... [Soft Humming]...",audioVoice:"Miyuki: 'The light is good today...'"},y={libido:15,stress:25,fatigue:10},h={surface:["ä»Šå¤©çš„å¤©æ°”çœ‹èµ·æ¥ä¸é”™â€¦â€¦","æ˜¨æ™šåƒçš„ç”œå“å‘³é“å¾ˆæ£’å‘¢ã€‚","å””â€¦â€¦"],deep:["æœŸå¾…ä¸Šå­¦çš„æ—¥å­å‘¢â€¦â€¦","å­¦é•¿ä¼¼ä¹æ˜¯ä¸ªå¾ˆå¥½çš„äººã€‚","å””ï¼Œ{{user}}è¿˜æ²¡åˆ°ä¹ˆï¼Ÿ"],shame:5,pleasure:0},k={wetLevel:"Level 0 (Drenched)",wetPercent:10,wetNote:"æ­£å¸¸çš„æ¹¿æ¶¦ç¨‹åº¦ï¼Œå› ç•¥å¾®æœŸå¾…è€Œäº›è®¸å¢åŠ åˆ†æ³Œé‡ã€‚",semenVol:"0 ml (Trace)",semenSrc:"Unknown / Mixed",analVol:"0 ml (Clean)",lastEjacTime:"N/A",residueNote:"æ£€æµ‹åˆ°å¾®é‡æ®‹ç•™å¯èƒ½æºè‡ªå…¬ç”¨è®¾æ–½æˆ–æ¥è§¦ä¼ é€’ï¼Œå»ºè®®è¿›ä¸€æ­¥æ ¸æŸ¥ã€‚"},$={upper:{deepThroat:{level:0,label:"Lv. 0 (Choking)"},nippleSensitivity:{level:0,label:"Lv. 0 (Hyper)"},lactationRisk:"Low (5%)"},lower:{vaginalCapacity:{level:0,label:"Lv. 0 (Tight)"},analAdaptation:{level:0,label:"Lv. 0 (Virgin)"},sphincterState:"Spasmodic (ç´§å¼ é—­åˆ)"}},L={kiss:{count:0,unknown:1},paizuri:{count:0,unknown:1},anal:{count:0,unknown:1},sex:{count:0,unknown:1},cheat:{count:0,unknown:1},touch:{count:0,unknown:1},oral:{count:0,label:"Practice"},orgasm:{count:0,today:0}},C={kiss:"Unknown / Sleep State",virginity:"Intact (Active)",analVirginity:"Intact",firstOrgasm:"Self (Masturbation)"},I=[{id:"Object A",desc:"Round Hairbrush (Handle)"},{id:"Person B",desc:"Masseur (Hand Contact)"},{id:"Person C",desc:"Protagonist (Arm/Head)"}],S={current:{top:"ç™½è‰²æ°´æ‰‹æœ (School Uniform)",bottom:"æ·±è“è‰²ç™¾è¤¶è£™ (Pleated Skirt)",bra:"ç™½è‰²è•¾ä¸å†…è¡£ (White Lace - B Cup)",panties:"ç™½è‰²æ£‰è´¨å†…è£¤ (White Cotton)",socks:"é»‘è‰²è¿‡è†è¢œ (Black Thigh-High)",shoes:"æ£•è‰²çš®é‹ (Brown Loafers)"},underwearStatus:{wetness:15,stains:"None (Clean)",wornTime:"6h 23m"},accessories:[{name:"å‘å¸¦",desc:"ç²‰è‰²è´è¶ç»“ (Pink Ribbon)"},{name:"é¡¹é“¾",desc:"é“¶è‰²å¿ƒå½¢åŠå  (Silver Heart)"},{name:"æ‰‹è¡¨",desc:"ç®€çº¦ç™½è‰²è¡¨ç›˜ (Simple White)"}],exposure:{rating:25,label:"Low (ä¿å®ˆ)",seduction:35}},E={mainQuest:{title:"æ¥è¿‘ç›®æ ‡",desc:"ä¸ MIYUKI å»ºç«‹åˆæ­¥ä¿¡ä»»å…³ç³»",progress:15,reward:"5000 CR + å¥½æ„Ÿåº¦ +10"},daily:[{name:"æ—©å®‰é—®å€™",status:"completed",reward:"200 CR"},{name:"åˆé¤é‚€çº¦",status:"active",reward:"500 CR"},{name:"æ”¾å­¦åŒè¡Œ",status:"locked",reward:"300 CR"},{name:"æ™šé—´é€šè¯",status:"locked",reward:"400 CR"}],hidden:[{name:"???",hint:"åœ¨è‰ºæœ¯æ¥¼å‘ç°æŸç‰©",reward:"2000 CR"},{name:"???",hint:"è§¦å‘ç‰¹æ®Šå¯¹è¯",reward:"å¥½æ„Ÿåº¦ +20"}],summary:{completed:3,earnedCR:1500,affectionChange:"+5"}},u={meta:f,basic:b,track:w,metrics:y,mind:h,body:k,dev:$,stats:L,firsts:C,recentContacts:I,outfit:S,tasks:E},l={wallet:u.meta.wallet,gameData:{...u},unlockedItems:new Set};function D(e){l.wallet+=e,document.getElementById("walletDisplay").textContent=l.wallet}function T(e){return l.unlockedItems.has(e)}function M(e){l.unlockedItems.add(e)}const B=[{title:"ç›´è‚ å†…å£æ•æ„Ÿåº¦",val:"High (Level 4)",price:1800,icon:"ğŸ©"},{title:"è´¹æ´›è’™æˆåˆ†åˆ†æ",val:"Estrogen Spike (è¯±äºº)",price:3600,icon:"ğŸ§ª"},{title:"æ¢¦å¢ƒè„‘æ³¢è§£æ",val:"Subject: Player (NTR Nightmare)",price:4500,icon:"ğŸ§ "},{title:"çš®è‚¤è§¦è§‰æ˜ å°„",val:"Hyper-Sensitive (å…¨èº«)",price:2400,icon:"âœ‹"},{title:"å†…è£¤å¸ƒæ–™é¥±å’Œåº¦",val:"98% (Dripping)",price:1200,icon:"ğŸ‘™"}],v={aiPool:B};function p(e){document.querySelectorAll(".tab-btn").forEach(a=>a.classList.remove("active")),document.querySelector(`[data-tab="${e}"]`).classList.add("active"),document.querySelectorAll(".module-section").forEach(a=>a.classList.remove("active")),document.getElementById("module-"+e).classList.add("active")}function m(e,a){if(!T(e))if(l.wallet>=a){D(-a),M(e);const n=document.getElementById("lock-"+e);n&&(n.style.opacity="0",setTimeout(()=>{n.classList.add("unlocked"),n.style.display="none"},500)),console.log(`è§£é”æˆåŠŸ: -${a} CR`)}else x(`ä½™é¢ä¸è¶³ï¼<br>éœ€è¦ ${a} CR`)}function x(e){document.getElementById("modalMsg").innerHTML=e,document.getElementById("modal").classList.add("show")}function A(){document.getElementById("modal").classList.remove("show")}function g(){const e=v.aiPool[Math.floor(Math.random()*v.aiPool.length)],a="ai-"+Date.now(),n=`
    <div class="data-block" style="animation: fadeIn 0.5s;">
      <div class="micro-lock" id="lock-${a}">
        <span class="lock-icon">${e.icon}</span>
        <div class="lock-title">AI æ¨æµ‹: ${e.title}</div>
        <button class="buy-btn" data-lock="${a}" data-cost="${e.price}">ä¸‹è½½ (${e.price} CR)</button>
      </div>
      <div class="data-row">
        <span>${e.title}</span>
        <span class="data-value val-gold">${e.val}</span>
      </div>
      <div style="font-size:10px; color:#aaa;">From: DeepLearning_Model_v9.2</div>
    </div>
  `;document.getElementById("ai-content-container").insertAdjacentHTML("beforeend",n)}function t(e,a,n=""){const o=document.getElementById(e);o&&(o.textContent=a,n&&(o.className=`data-value ${n}`))}function r(e,a,n){const o=document.getElementById(e);o&&(o.style.width=`${a}%`,o.setAttribute("data-percent",`${a}%`),n&&(o.className=`bar-fill ${n}`))}function H(){R(),P(),N(),U(),j(),O(),z(),V(),q(),Q(),F(),W(),document.getElementById("walletDisplay").textContent=l.wallet}function R(){const{basic:e}=l.gameData;t("val-bpm",e.bpm,"val-blue"),t("val-temp",e.temp),t("val-state",e.state,"val-blue")}function P(){const{track:e}=l.gameData;t("val-zone",e.zone),t("val-zone-warn",e.warn),t("val-building",e.building),t("val-room",e.room),t("val-audio-text",e.audioText),t("val-audio-voice",e.audioVoice)}function N(){const{metrics:e}=l.gameData,a=d(e.libido);t("val-libido",`${e.libido}% (${a})`,"val-purple"),r("bar-libido",e.libido,"bar-dev");const n=d(e.stress);t("val-stress",`${e.stress}% (${n})`,"val-gold"),r("bar-stress",e.stress,"");const o=d(e.fatigue);t("val-fatigue",`${e.fatigue}% (${o})`,"val-blue"),r("bar-fatigue",e.fatigue,"bar-wet")}function d(e){return e>80?"CRITICAL":e>50?"High":e<20?"Low":"Normal"}function U(){const{mind:e}=l.gameData,a=document.getElementById("surface-thoughts");a&&(a.innerHTML=e.surface.map(o=>`<div class="thought-bubble">"${o}"</div>`).join(""));const n=document.getElementById("deep-thoughts");n&&(n.innerHTML=e.deep.map(o=>`<div class="thought-bubble deep-thought">"${o}"</div>`).join("")),t("val-shame",`${e.shame}% (MAX)`,"val-red"),r("bar-shame",e.shame,""),t("val-pleasure",`${e.pleasure}% (Rising)`,"val-gold"),r("bar-pleasure",e.pleasure,"")}function j(){const{body:e}=l.gameData;t("val-wet-level",e.wetLevel),r("bar-wet",e.wetPercent,"bar-wet"),t("val-wet-note","> "+e.wetNote),t("val-semen-vol",e.semenVol,"val-grey"),t("val-semen-src",e.semenSrc,"val-grey"),t("val-anal-vol",e.analVol,"val-grey"),t("val-ejac-time",e.lastEjacTime),t("val-residue-note","* æ³¨ï¼š"+e.residueNote)}function O(){const{dev:e}=l.gameData;t("val-deep-throat",e.upper.deepThroat.label,"val-purple"),r("bar-deep-throat",e.upper.deepThroat.level,"bar-dev"),t("val-nipple",e.upper.nippleSensitivity.label,"val-red"),r("bar-nipple",e.upper.nippleSensitivity.level,"bar-dev"),t("val-lactation",e.upper.lactationRisk,"val-gold"),t("val-vaginal",e.lower.vaginalCapacity.label,"val-blue"),r("bar-vaginal",e.lower.vaginalCapacity.level,"bar-dev"),t("val-anal-adapt",e.lower.analAdaptation.label,"val-grey"),r("bar-anal",e.lower.analAdaptation.level,"bar-dev"),t("val-sphincter",e.lower.sphincterState)}function z(){const{stats:e}=l.gameData;t("val-kiss",`${e.kiss.count} (Unknown: ${e.kiss.unknown})`),t("val-paizuri",`${e.paizuri.count} (Unknown: ${e.paizuri.unknown})`),t("val-anal-count",`${e.anal.count} (Unknown: ${e.anal.unknown})`),t("val-sex",`${e.sex.count} (Unknown: ${e.sex.unknown})`),t("val-cheat",`${e.cheat.count} (Unknown: ${e.cheat.unknown})`),t("val-touch",`${e.touch.count} (Unknown: ${e.touch.unknown})`),t("val-oral",`${e.oral.count} (${e.oral.label})`,"val-purple"),t("val-orgasm",`${e.orgasm.count} (Today: +${e.orgasm.today})`,"val-red")}function V(){const{firsts:e}=l.gameData;t("val-first-kiss",e.kiss,"val-grey"),t("val-virginity",e.virginity,"val-gold"),t("val-anal-v",e.analVirginity,"val-gold"),t("val-first-orgasm",e.firstOrgasm)}function q(){const{recentContacts:e}=l.gameData,a=document.getElementById("recent-contacts");a&&(a.innerHTML=e.map(n=>`<div class="data-row"><span>${n.id}</span> <span class="data-value">${n.desc}</span></div>`).join(""))}function Q(){const{outfit:e}=l.gameData;if(!e)return;t("val-outfit-top",e.current.top),t("val-outfit-bottom",e.current.bottom),t("val-outfit-bra",e.current.bra,"val-purple"),t("val-outfit-panties",e.current.panties,"val-purple"),t("val-outfit-socks",e.current.socks),t("val-outfit-shoes",e.current.shoes),t("val-panty-wet",`${e.underwearStatus.wetness}%`,"val-blue"),r("bar-panty-wet",e.underwearStatus.wetness,"bar-wet"),t("val-panty-stain",e.underwearStatus.stains),t("val-worn-time",e.underwearStatus.wornTime);const a=document.getElementById("accessories-list");a&&(a.innerHTML=e.accessories.map(n=>`<div class="data-row"><span>${n.name}</span> <span class="data-value">${n.desc}</span></div>`).join("")),t("val-exposure",`${e.exposure.rating}% - ${e.exposure.label}`,"val-gold"),r("bar-exposure",e.exposure.rating,""),t("val-seduction",`${e.exposure.seduction}%`,"val-red")}function F(){const{tasks:e}=l.gameData;if(!e)return;const a=document.getElementById("main-quest");a&&(a.innerHTML=`
      <div class="data-row"><span>ä»»åŠ¡åç§°</span> <span class="data-value val-gold">${e.mainQuest.title}</span></div>
      <div class="data-row"><span>ä»»åŠ¡æè¿°</span> <span class="data-value">${e.mainQuest.desc}</span></div>
      <div class="data-row"><span>è¿›åº¦</span> <span class="data-value val-blue">${e.mainQuest.progress}%</span></div>
      <div class="bar-container"><div class="bar-fill bar-wet" style="width: ${e.mainQuest.progress}%;" data-percent="${e.mainQuest.progress}%"></div></div>
      <div class="data-row" style="margin-top:5px;"><span>å¥–åŠ±</span> <span class="data-value val-purple">${e.mainQuest.reward}</span></div>
    `);const n=document.getElementById("daily-tasks");n&&(n.innerHTML=e.daily.map(s=>{let i="",c="";return s.status==="completed"?(i="val-gold",c="âœ…"):s.status==="active"?(i="val-blue",c="ğŸ”„"):(i="val-grey",c="ğŸ”’"),`<div class="data-row"><span>${c} ${s.name}</span> <span class="data-value ${i}">${s.reward}</span></div>`}).join(""));const o=document.getElementById("hidden-tasks");o&&(o.innerHTML=e.hidden.map(s=>`
        <div class="data-row"><span>ğŸ”® ${s.name}</span> <span class="data-value val-purple">${s.reward}</span></div>
        <div style="font-size:10px; color:#aaa; margin-bottom:8px; padding-left:20px;">æç¤º: ${s.hint}</div>
      `).join("")),t("val-completed",`${e.summary.completed} ä¸ª`,"val-gold"),t("val-earned-cr",`${e.summary.earnedCR} CR`),t("val-affection",e.summary.affectionChange,"val-purple")}function W(){document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",()=>p(e.dataset.tab))}),document.addEventListener("click",e=>{if(e.target.classList.contains("buy-btn")){const a=e.target.dataset.lock,n=parseInt(e.target.dataset.cost,10);a&&n&&m(a,n)}}),document.querySelector(".ai-placeholder")?.addEventListener("click",g),document.getElementById("modalClose")?.addEventListener("click",A)}window.switchTab=p;window.unlockItem=m;window.generateAIContent=g;document.addEventListener("DOMContentLoaded",H);
